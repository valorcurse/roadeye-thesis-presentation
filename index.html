<!doctype html>
<html lang="en">	
<head>
	<meta charset="utf-8">
	<title>Reveal.js 3 Slide Demo</title>
	<link rel="stylesheet" href="css/reveal.min.css">
	<link rel="stylesheet" href="css/theme/default.css" id="theme">
	<link rel="stylesheet" type="text/css" href="presentation.css">
	<link rel="stylesheet" href="css/animate.css">
</head>

<body>
	<!-- Wrap the entire slide show in a div using the "reveal" class. -->
	<div class="reveal">
		<!-- Wrap all slides in a single "slides" class -->
		<div class="slides">
			<section class="" data-id="216bde8404c9eabe87fc1a424172cfac">
				<h1>RoadEye</h1>
			</section>

			<section>
				<div id="sourceImage" class="fragment current-visible" style="position: absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;">
					<h2>Bron afbeelding</h2>
					<img z-index: src="https://s3.amazonaws.com/media-p.slid.es/uploads/marceloavelino/images/482574/car.png" style="width: 795.9107744107744px; height: 533px; max-height: none; max-width: none;">
				</div>

				<div class="fragment" style="position: absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; white-space: nowrap;">
					<h2>Yellow segmentation</h2>
					
					<img id="band-graph" src="images/band-graph.png" style="height: 533px; max-height: none; max-width: none; display: none;">
					
					<div id="bandDiv" style="display: inline-block; position: relative;">
						<img id="yellow-segment" src="images/yellow-segment.png" style="width: 795.9107744107744px; height: 533px; max-height: none; max-width: none;">

						<img id="band1" src="images/band1.png" style="width: 795.9107744107744px; height: 41px; max-height: none; max-width: none; position: absolute; left: 0; top: 282px; display: none">
						
					</div>
					
					<img id="band1Graph" src="images/band1Graph.png" style="width: 795.9107744107744px; height: 41px; max-height: none; max-width: none; display: none">
					
					<canvas id="bandCanvas" style="margin-top: 19px; margin-left: 4px; left: 0; position: absolute"/>

				</div>

				<div class="fragment" style="position: absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; white-space: nowrap;">
				</div>
				
				<div class="fragment" style="position: absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; white-space: nowrap;">
				</div>

				<div class="fragment" style="position: absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; white-space: nowrap;">
				</div>

				<div class="fragment" style="position: absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; white-space: nowrap;">
				</div>

				<div class="fragment" style="position: absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; white-space: nowrap;">
				</div>
			</section>
		</div>
	</div>
	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.min.js"></script>

	<script>
		var pfx = ["webkit", "moz", "MS", "o", ""];
		function PrefixedEvent(element, type, callback) {
			for (var p = 0; p < pfx.length; p++) {
				if (!pfx[p]) type = type.toLowerCase();
				element.addEventListener(pfx[p]+type, callback, false);
			}
		}

		var indices = Reveal.getIndices();
		var slideIndex = 0;

		// Required, even if empty.
		Reveal.initialize({ });

		Reveal.addEventListener('slidechanged', function( event ) {
			slideIndex = event.indexh;
		});

		Reveal.addEventListener('fragmentshown', function( event ) {
			var fragmentIndex = event.fragment.getAttribute("data-fragment-index");
			
			if (slideIndex == 1) {
				console.log("Shown: " + fragmentIndex);
				
				switch(fragmentIndex) {

					case "1": {
						var yellowSegment = document.getElementById('yellow-segment');
						yellowSegment.className = "animated fadeIn";
						break;
					}

					case "2": {
						var yellowSegment = document.getElementById('yellow-segment');
						yellowSegment.className = "move-segmentation";

						PrefixedEvent(yellowSegment, "AnimationEnd", AnimationListener);
						function AnimationListener(e) {
							if (e.type.toLowerCase().indexOf("animationend") >= 0 && e.animationName == "translate-right") {
								var bandGraph = document.getElementById("band-graph");
								bandGraph.style.display = "inline-block";
								bandGraph.className = "animated fadeInLeft";
							}
						}
						break;

					}

					case "3": {
						var yellowSegment = document.getElementById('yellow-segment');
						var bandGraph = document.getElementById("band-graph");

						var canvas = document.getElementById("bandCanvas");
						canvas.width = bandGraph.width + yellowSegment.width + 14;
						canvas.height = bandGraph.height;

						var ctx = canvas.getContext("2d");
						ctx.strokeStyle="#FF0000";
						ctx.strokeRect(0, canvas.height / 2 + 15, canvas.width, 42);

						break;
					}

					case "4": {
						var band1 = document.getElementById("band1");
						var canvas = document.getElementById("bandCanvas");

						band1.style.display = "inline";
						band1.className = "animated fadeIn";
						canvas.style.display = "none";

						break;
					}

					case "5": {
						var bandGraph = document.getElementById("band-graph");
						bandGraph.className = "animated fadeOutLeft";

						var yellowSegment = document.getElementById('yellow-segment');
						yellowSegment.className = "animated fadeOutRight";
						
						var band1 = document.getElementById("band1");
						band1.className = "translateBand";


						PrefixedEvent(yellowSegment, "AnimationEnd", Case5Listener);
						function Case5Listener(e) {
							if (e.type.toLowerCase().indexOf("animationend") >= 0 && e.animationName == "fadeOutRight") {
								yellowSegment.style.display = "none";
								bandGraph.style.display = "none";
								band1.style.position = "static";
							}
						}

						break;
					}

					case "6": {
						var bandDiv = document.getElementById("bandDiv");
						bandDiv.style.display = "";

						var band1 = document.getElementById("band1");
						band1.style.marginBottom = "0px";

						var band1Graph = document.getElementById("band1Graph");
						band1Graph.style.display = "";
						band1Graph.style.marginTop = "0px";
						band1Graph.className = "animated fadeInUp";

						break;
					}
				}
			}
		});

Reveal.addEventListener( 'fragmenthidden', function( event ) {
	var fragmentIndex = event.fragment.getAttribute("data-fragment-index");
	console.log("Hidden: " + fragmentIndex);
	
	if (slideIndex == 1) {

		switch(fragmentIndex) {
			case "1": {
				var yellowSegment = document.getElementById('yellow-segment');
				yellowSegment.className = "animated fadeOut";
				break;
			}

			case "2": {
				var bandGraph = document.getElementById("band-graph");
				bandGraph.className = "animated fadeOutLeft";

				PrefixedEvent(bandGraph, "AnimationEnd", BandAnimationListener);
				function BandAnimationListener(e) {
					if (e.type.toLowerCase().indexOf("animationend") >= 0 && e.animationName == "fadeOutLeft") {

						bandGraph.style.display = "none";

						var yellowSegment = document.getElementById('yellow-segment');
						yellowSegment.className = "return-segmentation";
					}
				}

				break;
			}

			case "3": {
				var canvas = document.getElementById("bandCanvas");
				canvas.style.display = "none";
				break;
			}

			case "4": {
				var band1 = document.getElementById("band1");
				band1.className = "animated fadeOut";
				console.log("here");

				PrefixedEvent(band1, "AnimationEnd", hidden4Listener);
				function hidden4Listener(e) {
					if (e.type.toLowerCase().indexOf("animationend") >= 0 && e.animationName == "fadeOut") {
						band1.style.display = "none";
						band1.className = "";
						console.log("here2: " + e.animationName);
						var canvas = document.getElementById("bandCanvas");
						canvas.style.display = "inline";
					}
				}

				break;
			}

			case "5": {
				var bandGraph = document.getElementById("band-graph");
				bandGraph.className = "animated fadeInLeft";

				var yellowSegment = document.getElementById('yellow-segment');
				yellowSegment.className = "animated fadeInRight";

				var band1 = document.getElementById("band1");
				band1.className = "unTranslateBand";

				PrefixedEvent(band1, "AnimationEnd", hidden5Listener);
				function hidden5Listener(e) {
					console.log("here3: " + e.animationName);
					if (e.type.toLowerCase().indexOf("animationend") >= 0 && e.animationName == "bandUnTranslate") {
						bandGraph.style.display = "inline-block";
						yellowSegment.style.display = "inline-block";
						band1.style.position = "absolute";
					}
				}
				break;
			}
		}
	}
});
</script>
</body>
</html>

